<html lang="ar" dir="rtl"><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/extend-native-history-api.js"></script><script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/requests.js"></script><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงูุฃุฏูู - ูุธุงู ุงูุชุตููุช ุงูุฌุงูุนู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <head>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .sidebar {
            background: linear-gradient(180deg, #4a5d23, #6b7c32);
            box-shadow: 4px 0 15px rgba(0,0,0,0.1);
        }
        
        .sidebar-item {
            transition: all 0.3s ease;
            border-radius: 12px;
            margin: 4px 8px;
        }
        
        .sidebar-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(-4px);
        }
        
        .sidebar-item.active {
            background: rgba(255,255,255,0.2);
            border-right: 4px solid #fbbf24;
        }
        
        .content-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.05);
            margin-bottom: 24px;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .stats-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }
        
        .vote-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        .vote-table th {
            background: linear-gradient(135deg, #4a5d23, #6b7c32);
            color: white;
            padding: 16px;
            text-align: center;
            font-weight: 600;
        }
        
        .vote-table td {
            padding: 16px;
            text-align: center;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .vote-table tr:hover {
            background: #f9fafb;
        }
        
        .progress-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a5d23, #6b7c32);
            border-radius: 4px;
            transition: width 0.8s ease;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #6b7c32;
            box-shadow: 0 0 0 3px rgba(107, 124, 50, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4a5d23, #6b7c32);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 93, 35, 0.3);
        }
        
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-secondary:hover {
            background: #e5e7eb;
        }
        
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                z-index: 50;
                transition: transform 0.3s ease;
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-right: 0 !important;
            }
        }
    </style>
 

      </head>
    <body class="bg-gray-50 min-h-full" bis_status="ok" bis_frame_id="1456" __processed_5a428eb2-83fc-44e5-8c16-4b87f703cdda__="true">
   <!--////////////////////////////////////////////////////////////////////////////////////////////////////////////
        <div id="addSubjectModal" class="fixed inset-0 modal-overlay items-center justify-center z-50 flex">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white">๐ ุฅุถุงูุฉ ูุงุฏุฉ ุฏุฑุงุณูุฉ ุฌุฏูุฏุฉ</h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl">โ</button>
            </div>
            
            <form class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงุณู ุงููุงุฏุฉ</label>
                        <input type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ูุซุงู: ุจุฑูุฌุฉ ุงูููุจ ุงููุชูุฏูุฉ">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุฑูุฒ ุงููุงุฏุฉ</label>
                        <input type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ูุซุงู: CS401">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ูุตู ุงููุงุฏุฉ</label>
                    <textarea rows="4" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="ุงูุชุจ ูุตูุงู ููุตูุงู ูููุงุฏุฉ ููุญุชูุงูุง..."></textarea>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงููููุฉ</label>
                        <select class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>ุนููู ุงูุญุงุณูุจ</option>
                            <option>ุงูููุฏุณุฉ</option>
                            <option>ุฅุฏุงุฑุฉ ุงูุฃุนูุงู</option>
                            <option>ุงูุทุจ</option>
                            <option>ุงูุญููู</option>
                            <option>ุงูุชุฑุจูุฉ</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงุณู ุงูุฏูุชูุฑ</label>
                        <input type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุนุฏุฏ ุงูุณุงุนุงุช</label>
                        <select class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>3 ุณุงุนุงุช</option>
                            <option>2 ุณุงุนุฉ</option>
                            <option>4 ุณุงุนุงุช</option>
                            <option>1 ุณุงุนุฉ</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุชุงุฑูุฎ ุจุฏุก ุงูุชุตููุช</label>
                        <input type="datetime-local" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุชุงุฑูุฎ ุงูุชูุงุก ุงูุชุตููุช</label>
                        <input type="datetime-local" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงููุฆุงุช ุงููุณุชูุฏูุฉ</label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                            <span class="mr-2 text-sm">ุงูุณูุฉ ุงูุฃููู</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                            <span class="mr-2 text-sm">ุงูุณูุฉ ุงูุซุงููุฉ</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                            <span class="mr-2 text-sm">ุงูุณูุฉ ุงูุซุงูุซุฉ</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                            <span class="mr-2 text-sm">ุงูุณูุฉ ุงูุฑุงุจุนุฉ</span>
                        </label>
                    </div>
                </div>
                
                <div class="flex gap-4 pt-4">
                    <button type="submit" class="flex-1 bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 rounded-xl hover:from-green-700 hover:to-blue-700 transition-all font-semibold">
                        โ ุฅุถุงูุฉ ุงููุงุฏุฉ
                    </button>
                    <button type="button" id="cancelModal" class="flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-semibold">
                        ุฅูุบุงุก
                    </button>
                </div>
            </form>
        </div>
    </div>-->
<!--////////////////////////////////////////////////////////////////////////////////////////////////////////////-->


    <!-- Header -->
    <header class="bg-white shadow-lg border-b border-gray-200 sticky top-0 z-40">
        <div class="flex justify-between items-center h-16 px-6">
            <div class="flex items-center">
                <button id="mobileMenuBtn" class="md:hidden p-2 text-gray-600 hover:text-gray-800">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <div class="flex items-center mr-4">
                    <div class="w-10 h-10 bg-gradient-to-r from-green-700 to-yellow-600 rounded-xl flex items-center justify-center ml-3">
                        <span class="text-white font-bold text-lg">๐ณ๏ธ</span>
                    </div>
                    <h1 class="text-xl font-bold text-gray-800">ููุญุฉ ุงูุชุญูู</h1>
                </div>
            </div>

            <div class="flex items-center space-x-4 space-x-reverse">
                <div class="flex items-center">
                    <div class="h-10 w-10 rounded-full bg-gradient-to-r from-green-600 to-yellow-500 flex items-center justify-center">
                        <span class="text-sm font-bold text-white">ุฃุฏ</span>
                    </div>
                    <span class="mr-3 text-gray-700 font-semibold">ุงูุฃุฏูู ุงูุฑุฆูุณู</span>
                </div>
                <button class="bg-red-100 text-red-600 px-4 py-2 rounded-lg hover:bg-red-200 transition-colors font-semibold">
                    ๐ช ุชุณุฌูู ุฎุฑูุฌ
                </button>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="sidebar w-64 min-h-screen text-white mobile-open" id="sidebar">
            <div class="p-6">
                <nav class="space-y-2">
                    <a href="#" class="sidebar-item active flex items-center p-3 text-white hover:text-yellow-200" data-page="dashboard">
                        <span class="text-xl ml-3">๐</span>
                        <span class="font-semibold">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center p-3 text-white hover:text-yellow-200" data-page="results">
                        <span class="text-xl ml-3">๐</span>
                        <span class="font-semibold">ูุชุงุฆุฌ ุงูุชุตููุชุงุช</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center p-3 text-white hover:text-yellow-200" data-page="add-vote">
                        <span class="text-xl ml-3">๐</span>
                        <span class="font-semibold">ุฅุถุงูุฉ ุชุตููุช ุฌุฏูุฏ</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center p-3 text-white hover:text-yellow-200" data-page="voters">
                        <span class="text-xl ml-3">๐ฅ</span>
                        <span class="font-semibold">ูุงุฆูุฉ ุงููุตูุชูู</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center p-3 text-white hover:text-yellow-200" data-page="settings">
                        <span class="text-xl ml-3">โ๏ธ</span>
                        <span class="font-semibold">ุงูุฅุนุฏุงุฏุงุช</span>
                    </a>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 mr-64 md:mr-0" id="mainContent">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page-section active p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</h2>
                    <p class="text-gray-600">ููุฎุต ุณุฑูุน ุนู ุญุงูุฉ ุงููุธุงู</p>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="stats-card">
                        <div class="text-4xl mb-3">๐ณ๏ธ</div>
                        <div class="text-3xl font-bold text-green-700 mb-1">5</div>
                        <div class="text-gray-600 font-semibold">ุงูุชุตููุชุงุช ุงูุญุงููุฉ</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="text-4xl mb-3">๐ฅ</div>
                        <div class="text-3xl font-bold text-blue-700 mb-1">1,247</div>
                        <div class="text-gray-600 font-semibold">ุงูุทูุงุจ ุงููุตูุชูู</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="text-4xl mb-3">๐</div>
                        <div class="text-3xl font-bold text-purple-700 mb-1">ุงูุฐูุงุก ุงูุงุตุทูุงุนู</div>
                        <div class="text-gray-600 font-semibold">ุฃูุซุฑ ูุงุฏุฉ ุชุตููุชุงู</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="text-4xl mb-3">โฐ</div>
                        <div class="text-3xl font-bold text-orange-700 mb-1">ููุฐ ุณุงุนุชูู</div>
                        <div class="text-gray-600 font-semibold">ุขุฎุฑ ุชุตููุช ูุถุงู</div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="content-card">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">๐ ุงููุดุงุท ุงูุฃุฎูุฑ</h3>
                    <div class="space-y-4">
                        <div class="flex items-center p-4 bg-green-50 rounded-lg">
                            <div class="text-2xl ml-4">โ</div>
                            <div>
                                <div class="font-semibold text-gray-800">ุชู ุฅุถุงูุฉ ุชุตููุช ุฌุฏูุฏ</div>
                                <div class="text-sm text-gray-600">ุชุตููุช ูููุงุฏ ุงููุตู ุงููุงุฏู - ููุฐ ุณุงุนุชูู</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-blue-50 rounded-lg">
                            <div class="text-2xl ml-4">๐ณ๏ธ</div>
                            <div>
                                <div class="font-semibold text-gray-800">ุตูุช ุฌุฏูุฏ ุนูู ูุงุฏุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</div>
                                <div class="text-sm text-gray-600">ูู ุงูุทุงูุจ ุฃุญูุฏ ูุญูุฏ - ููุฐ 15 ุฏูููุฉ</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-yellow-50 rounded-lg">
                            <div class="text-2xl ml-4">โ๏ธ</div>
                            <div>
                                <div class="font-semibold text-gray-800">ุชุตููุช ููุชูู ูุฑูุจุงู</div>
                                <div class="text-sm text-gray-600">ุชุตููุช ููุงุฏ ุงููุตู ุงูุตููู - ููุชูู ุฎูุงู ููููู</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Page -->
            <div id="results" class="page-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">๐ ูุชุงุฆุฌ ุงูุชุตููุชุงุช</h2>
                    <p class="text-gray-600">ุนุฑุถ ุชูุตููู ููุชุงุฆุฌ ุฌููุน ุงูุชุตููุชุงุช</p>
                </div>

                <!-- Results Table -->
                <div class="content-card">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">ูุชุงุฆุฌ ุชุตููุช ููุงุฏ ุงููุตู ุงููุงุฏู</h3>
                    
                    <table class="vote-table" id="resultsTable">
                        <thead>
                            <tr>
                                <th>ุงููุงุฏุฉ</th>
                                <th>ุนุฏุฏ ุงูุฃุตูุงุช</th>
                                <th>ุงููุณุจุฉ %</th>
                                <th>ุงูุชูุฏู</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-semibold">ุงูุฐูุงุก ุงูุงุตุทูุงุนู</td>
                                <td class="text-green-600 font-bold">587</td>
                                <td class="text-green-600 font-bold">47%</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 47%"></div>
                                    </div>
                                </td>
                                <td>
                                     <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                    <button class="btn-secondary text-sm bg-red-100">ุญุฐู</button>
                                    <button class="btn-secondary text-sm bg-blue-100">ุชุนุฏูู</button>
                                    <button class="btn-secondary text-sm bg-orange-100">ุงุฎูุงุก</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-semibold">ุฃูู ุณูุจุฑุงูู</td>
                                <td class="text-blue-600 font-bold">376</td>
                                <td class="text-blue-600 font-bold">30%</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 30%"></div>
                                    </div>
                                </td>
                                <td>
                                   <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                    <button class="btn-secondary text-sm bg-red-100">ุญุฐู</button>
                                    <button class="btn-secondary text-sm bg-blue-100">ุชุนุฏูู</button>
                                    <button class="btn-secondary text-sm bg-orange-100">ุงุฎูุงุก</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-semibold">ุจุฑูุฌุฉ ููุจ</td>
                                <td class="text-purple-600 font-bold">284</td>
                                <td class="text-purple-600 font-bold">23%</td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 23%"></div>
                                    </div>
                                </td>
                                <td>
                                    <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                    <button class="btn-secondary text-sm bg-red-100">ุญุฐู</button>
                                    <button class="btn-secondary text-sm bg-blue-100">ุชุนุฏูู</button>
                                    <button class="btn-secondary text-sm bg-orange-100">ุงุฎูุงุก</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Chart -->
                <div class="content-card">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">๐ ุงูุฑุณู ุงูุจูุงูู</h3>
                    <div class="chart-container">
                        <canvas id="votesChart" height="0" style="display: block; box-sizing: border-box; height: 0px; width: 0px;" width="0"></canvas>
                    </div>
                </div>
            </div>

            <!-- Add Vote Page -->
            <div id="add-vote" class="page-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">๐ ุฅุถุงูุฉ ุชุตููุช ุฌุฏูุฏ</h2>
                    <p class="text-gray-600">ุฅูุดุงุก ุชุตููุช ุฌุฏูุฏ ููุทูุงุจ</p>
                </div>

                <div class="content-card max-w-4xl">
                    <form id="addVoteForm" class="space-y-6">
                        <div>
                            <label for="voteName" class="block text-sm font-semibold text-gray-700 mb-2">๐น ุงุณู ุงูุชุตููุช</label>
                            <input type="text" id="voteName" class="form-input" placeholder="ูุซุงู: ุชุตููุช ููุงุฏุฉ ุงููุตู ุงููุงุฏู" required="">
                        </div>

                        <div>
                            <label for="voteDescription" class="block text-sm font-semibold text-gray-700 mb-2">๐น ูุตู ุงูุชุตููุช</label>
                            <textarea id="voteDescription" rows="4" class="form-input resize-none" placeholder="ุงูุชุจ ูุตูุงู ุจุณูุทุงู ููุชุตููุช..." required=""></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-4">๐น ูุงุฆูุฉ ุงูุชุฎุตุตุงุช</label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                  <select id="namesubject" class="form-input" required="">
                                        <option value="">ุงุฎุชุฑ ุงูุชุฎุตุต</option>
                                        <option value="ุงูุฐูุงุก ุงูุงุตุทูุงุนู">ุงูุฐูุงุก ุงูุงุตุทูุงุนู</option>
                                        <option value="ุฃูู ุณูุจุฑุงูู">ุฃูู ุณูุจุฑุงูู</option>
                                        <option value="ูุธู ูุนูููุงุช ุงุฏุงุฑูุฉ">ูุธู ูุนูููุงุช ุงุฏุงุฑูุฉ</option>
                                        <option value="ุนููู ุงูุญุงุณูุจ">ุนููู ุงูุญุงุณูุจ</option>
                                        <option value="ูุธู ูุนูููุงุช ูุญุงุณุจูุฉ">ูุธู ูุนูููุงุช ูุญุงุณุจูุฉ</option>
                                        <option value="ุชุทููุฑ ุชุทุจููุงุช ุงุฌูุฒุฉ ุฐููุฉ">ุชุทููุฑ ุชุทุจููุงุช ุงุฌูุฒุฉ ุฐููุฉ </option>
                                    </select>

                            </div>
                        </div>

                        <!-- ุชูุงุตูู ุงููุงุฏุฉ -->
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h4 class="text-lg font-bold text-gray-800 mb-4">๐ ุชูุงุตูู ุงููุงุฏุฉ</h4>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="teacherName" class="block text-sm font-semibold text-gray-700 mb-2">๐จโ๐ซ ุงุณู ุงููุฏุฑุณ</label>
                                    <input type="text" id="teacherName" class="form-input" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ ุนูู" required="">
                                </div>
                                
                                <div>
                                    <label for="creditHours" class="block text-sm font-semibold text-gray-700 mb-2">โฐ ุนุฏุฏ ุงูุณุงุนุงุช</label>
                                    <select id="creditHours" class="form-input" required="">
                                        <option value="">ุงุฎุชุฑ ุนุฏุฏ ุงูุณุงุนุงุช</option>
                                        <option value="1">1 ุณุงุนุฉ</option>
                                        <option value="2">2 ุณุงุนุฉ</option>
                                        <option value="3">3 ุณุงุนุงุช</option>
                                        <option value="4">4 ุณุงุนุงุช</option>
                                        <option value="5">5 ุณุงุนุงุช</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="suggestedTime" class="block text-sm font-semibold text-gray-700 mb-2">๐ ุงูููุนุฏ ุงูููุชุฑุญ</label>
                                    <input type="text" id="suggestedTime" class="form-input" placeholder="ุงูุฃุญุฏ ูุงูุซูุงุซุงุก 10:00-11:30" required="">
                                </div>
                                
                                <div>
                                    <label for="classroom" class="block text-sm font-semibold text-gray-700 mb-2">๐๏ธ ุงููุงุนุฉ ุงูููุชุฑุญุฉ</label>
                                    <input type="text" id="classroom" class="form-input" placeholder="ูุงุนุฉ 201 - ูุจูู ุนููู ุงูุญุงุณูุจ" required="">
                                </div>
                                <div class="mt-4">
                                    <label for="prerequisite" class="block text-sm font-semibold text-gray-700 mb-2">๐ ุงููุชุทูุจ ุงูุณุงุจู</label>
                                    <input type="text" id="prerequisite" class="form-input" placeholder="ูุซุงู: ููุฏูุฉ ูู ุงูุจุฑูุฌุฉุ ุฃุณุงุณูุงุช ุงูุญุงุณูุจ">
                                </div>
                                <div class="mt-4">
                                    <label for="numbersub" class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุฏุฉ </label>
                                    <input type="text" id="numbersub" class="form-input" placeholder="500780">
                                </div>
                            </div>
                            
                        </div>

                      <!--  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="startDate" class="block text-sm font-semibold text-gray-700 mb-2">๐น ุชุงุฑูุฎ ุงูุจุฏุก</label>
                                <input type="datetime-local" id="startDate" class="form-input" required="">
                            </div>
                            <div>
                                <label for="endDate" class="block text-sm font-semibold text-gray-700 mb-2">๐น ุชุงุฑูุฎ ุงูุงูุชูุงุก</label>
                                <input type="datetime-local" id="endDate" class="form-input" required="">
                            </div>
                        </div>-->

                        <div class="flex gap-4 pt-6">
                            <button type="submit" class="btn-primary flex-1">
                                ๐ ูุดุฑ ุงูุชุตููุช
                            </button>
                            <button type="button" class="btn-secondary flex-1">
                                ุฅูุบุงุก
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Voters Page -->
            <div id="voters" class="page-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">๐ฅ ูุงุฆูุฉ ุงููุตูุชูู</h2>
                    <p class="text-gray-600">ุนุฑุถ ุฌููุน ุงูุทูุงุจ ุงูุฐูู ุดุงุฑููุง ูู ุงูุชุตููุช</p>
                </div>

                <div class="content-card">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">ูุงุฆูุฉ ุงููุตูุชูู ุงูุญุงููุฉ</h3>
                        <div class="flex gap-3">
                            <input type="text" placeholder="ุงูุจุญุซ ุจุงูุงุณู ุฃู ุงูุฑูู ุงูุฌุงูุนู..." class="form-input w-64">
                            <button class="btn-secondary">๐ ุจุญุซ</button>
                        </div>
                    </div>

                    <table class="vote-table">
                        <thead>
                            <tr>
                                <th>ุงูุงุณู</th>
                                <th>ุงูุฑูู ุงูุฌุงูุนู</th>
                                <th>ุงููุงุฏุฉ ุงููุตููุช ููุง</th>
                                <th>ููุช ุงูุชุตููุช</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="votes-body">
                            <tr>
                                <td class="font-semibold">ุฃุญูุฏ ูุญูุฏ ุนูู</td>
                                <td>2021001234</td>
                                <td class="text-green-600">ุงูุฐูุงุก ุงูุงุตุทูุงุนู</td>
                                <td>2024-11-20 14:30</td>
                                <td>
                                    <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-semibold">ูุงุทูุฉ ุฃุญูุฏ</td>
                                <td>2021001235</td>
                                <td class="text-blue-600">ุฃูู ุณูุจุฑุงูู</td>
                                <td>2024-11-20 13:45</td>
                                <td>
                                    <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-semibold">ูุญูุฏ ุณุงุฑุฉ</td>
                                <td>2021001236</td>
                                <td class="text-purple-600">ุจุฑูุฌุฉ ููุจ</td>
                                <td>2024-11-20 12:20</td>
                                <td>
                                    <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-semibold">ุณุงุฑุฉ ูุญููุฏ</td>
                                <td>2021001237</td>
                                <td class="text-green-600">ุงูุฐูุงุก ุงูุงุตุทูุงุนู</td>
                                <td>2024-11-20 11:15</td>
                                <td>
                                    <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="font-semibold">ุนูู ุญุณู</td>
                                <td>2021001238</td>
                                <td class="text-blue-600">ุฃูู ุณูุจุฑุงูู</td>
                                <td>2024-11-20 10:30</td>
                                <td>
                                    <button class="btn-secondary text-sm">ุนุฑุถ ุงูุชูุงุตูู</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="flex justify-center mt-6">
                        <button class="btn-secondary">๐ ุนุฑุถ ุงููุฒูุฏ</button>
                    </div>
                </div>
            </div>

            <!-- Settings Page --><!--ูููู ุดููุง ุญุฑู ุงูุงุณ ู ุงูุณูุชููุฌ -->
            <div id="setting" class="page-section p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h2>
                    <p class="text-gray-600">ุฅุนุฏุงุฏุงุช ุงููุธุงู ูุงูุชุญูู ุงูุนุงู</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="content-card">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">๐ง ุฅุนุฏุงุฏุงุช ุนุงูุฉ</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุณู ุงููุธุงู</label>
                                <input type="text" class="form-input" value="ูุธุงู ุงูุชุตููุช ุงูุฌุงูุนู">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ูุตู ุงููุธุงู</label>
                                <textarea rows="3" class="form-input resize-none">ูุธุงู ุชุตููุช ุฅููุชุฑููู ููุทูุงุจ ูุงุฎุชูุงุฑ ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ</textarea>
                            </div>
                            <button class="btn-primary">๐พ ุญูุธ ุงูุชุบููุฑุงุช</button>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">๐ค ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุณู ุงููุณุชุฎุฏู</label>
                                <input type="text" class="form-input" value="admin">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                                <input type="email" class="form-input" value="admin@university.edu">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                                <input type="password" class="form-input" placeholder="ุงุชุฑููุง ูุงุฑุบุฉ ุฅุฐุง ูู ุชุฑุฏ ุงูุชุบููุฑ">
                            </div>
                            <button class="btn-primary">๐ ุชุญุฏูุซ ุงูุญุณุงุจ</button>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">๐ ุฅุนุฏุงุฏุงุช ุงูุชุตููุช</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="font-semibold">ุงูุณูุงุญ ุจุงูุชุตููุช ุงููุชุนุฏุฏ</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="font-semibold">ุฅุธูุงุฑ ุงููุชุงุฆุฌ ููุฑุงู</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" checked="">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุญุฏ ุงูุฃูุตู ููุชุตููุชุงุช ุงูููููุฉ</label>
                                <input type="number" class="form-input" value="1" min="1" max="10">
                            </div>
                            <button class="btn-primary">โ๏ธ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">๐๏ธ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h3>
                        <div class="space-y-4">
                            <button class="btn-secondary w-full">๐ค ุชุตุฏูุฑ ุงูุจูุงูุงุช</button>
                            <button class="btn-secondary w-full">๐ฅ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</button>
                            <button class="bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors w-full font-semibold">
                                ๐๏ธ ูุณุญ ุฌููุน ุงูุจูุงูุงุช
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>














    <div id="addSubjectModal" class="fixed inset-0 modal-overlay items-center justify-center z-50 flex hidden">
        <div class=" dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white"> ุชุนุฏูู ุงููุงุฏุฉ </h3>
                <button  onclick="closeModalFunc()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl ">โ</button>
            </div>
            
            <form class="space-y-6">
                <div class="block grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงุณู ุงููุงุฏุฉ</label>
                        <input id="modalName" type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ูุซุงู: ุจุฑูุฌุฉ ุงูููุจ ุงููุชูุฏูุฉ">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ูุตู ุงููุงุฏุฉ</label>
                    <textarea id="modalDescription" rows="4" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="ุงูุชุจ ูุตูุงู ููุตูุงู ูููุงุฏุฉ ููุญุชูุงูุง..."></textarea>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงูุชุฎุตุต</label>
                        <select id="sub" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>MIS</option>
                            <option>CIS</option>
                            <option>CY</option>
                            <option>CIS</option>
                            <option>ุงูุญููู</option>
                            <option>ุงูุชุฑุจูุฉ</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงุณู ุงูุฏูุชูุฑ</label>
                        <input id="modalTeacher" type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุนุฏุฏ ุงูุณุงุนุงุช</label>
                        <select id="modalHours" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>3 ุณุงุนุงุช</option>
                            <option>2 ุณุงุนุฉ</option>
                            <option>4 ุณุงุนุงุช</option>
                            <option>1 ุณุงุนุฉ</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                   
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงููุงุนุฉ</label>
                        <input id="modalRoom" type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ูุชุทูุจ ุณุงุจู</label>
                        <input id="modalPrerequisite" type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">ุงูููุนุฏ</label>
                        <input id="modalTime" type="text" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ุฏ. ุฃุญูุฏ ูุญูุฏ">
                    </div>
                   
                </div>
                
                
                
                <div class="flex gap-4 pt-4">
                    <button type="button"  onclick="BTNsave()" class="BTNsave flex-1 bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 rounded-xl hover:from-green-700 hover:to-blue-700 transition-all font-semibold">
                        โ ุญูุธ
                    </button>
                    <button type="button"  onclick="closeModalFunc()" class="flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-semibold">
                        ุฅูุบุงุก
                    </button>
                    
                </div>
            </form>
        </div>
    </div>
    <script>




async function loadVotes() {
    try {
        const response = await fetch('http://localhost:5000/votes'); // endpoint ุชุจุนู
        const votes = await response.json();
        const tableBody = document.getElementById('votes-body');
        tableBody.innerHTML = ''; // ูุณุญ ุงููุฏูู


        votes.forEach(vote => {
            const row = `
                <tr>
                    <td class="font-semibold">${vote.namestudent}</td>
                    <td>${vote.student_id}</td>
                    <td class="text-green-600">${vote.namesubject}</td>
                    <td>${vote.voted_at}</td>
                    <td>
                        <button 
                        onclick="deleteVotetable(${vote.id})"
                        class="btn-secondary text-sm bg-red-100
                         "> ุญุฐู ุงูุชุตููุช 
                         </button>

                        
                    </td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });

    } catch (err) {
        console.error("Error loading votes:", err);
    }
}

// ๐ฅ ุชุดุบูู ุงููุงููุดู ูุจุงุดุฑุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
window.onload = loadVotes;




function closeModalFunc() {
  const addSubjectModal = document.getElementById("addSubjectModal");

  // ูุฎูู ุงูููุฏุงู ุจุงูููุฉ
  addSubjectModal.style.display = "none";
  addSubjectModal.classList.add("hidden");
  addSubjectModal.classList.remove("flex");

  // ูุฑุฌูุน ุงูุชูุฑูุฑ ููุตูุญุฉ
  document.body.style.overflow = "auto";
}


window.currentEditId = null;
function updatecard(iid){
    window.currentEditId = iid; 
      fetch("http://localhost:5000/getVotes")
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        if (!data.success) { throw new Error("ูุดู ุฌูุจ ุงูุชุตููุชุงุช"); }
        const votes = data.votes;
        const vote = votes.find(v => String(v.id) === String(iid));
         if (!vote) {
        console.error("โ ุงูุชุตููุช ุบูุฑ ููุฌูุฏ ููู id:", iid);
        return;
      }
        const modal = document.getElementById("addSubjectModal");
        modal.style.display = "flex";
        document.getElementById("modalName").value = vote.name || "";
        document.getElementById("modalDescription").value = vote.description || "";
        document.getElementById("modalTeacher").value = vote.teacher || "";
        document.getElementById("modalHours").value = vote.hours || "";
        document.getElementById("modalRoom").value = vote.room || "";
        document.getElementById("modalPrerequisite").value = vote.prerequisite || "";
        document.getElementById("modalTime").value = vote.time || "";
        modal.setAttribute("data-edit-id", iid);        
       
  /*      const closeModalBtn = document.getElementById("closeModal");
        const editModal = document.getElementById("addSubjectModal");
        closeModalBtn.addEventListener("click", () => {
        editModal.classList.add("hidden"); // ูุฎูู ุงูููุฏุงู
       
    });
*/
      console.log("๐ข ุชู ูุชุญ ุงูููุฏุงู ู ุชุฎุฒูู ID:", iid);  
    }else {
        console.error("โ ูุดู ูู ุฌูุจ ุงูุจูุงูุงุช ูู ุงูุณูุฑูุฑ");}
    })
     .catch(err => console.error("โ๏ธ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ:", err));
  
}
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("BTNsave");
  if (btn) btn.addEventListener("click", BTNsave);
});

 async function BTNsave(){
      const modal = document.getElementById("addSubjectModal"); 
      const idFromModal = modal.getAttribute("data-edit-id"); 
      const id = idFromModal ?? window.currentEditId;
      console.log("๐ ID ุนูุฏ ุงูุญูุธ:", id);
       if (!id && id !== 0) {
            showMessage("โ ุฎุทุฃ: ูุง ููุฌุฏ ID ููุชุนุฏูู", "error");
            return;
        }
      
        const updatedVote = {
        name: document.getElementById("modalName").value.trim(),
        description: document.getElementById("modalDescription").value.trim(),
        teacher: document.getElementById("modalTeacher").value.trim(),
        hours: parseInt(document.getElementById("modalHours").value.trim()) || null,
        room: document.getElementById("modalRoom").value.trim(),
        prerequisite: document.getElementById("modalPrerequisite").value.trim(),
        time: document.getElementById("modalTime").value.trim(),};

  try {

    const numericId = Number(id);
    const response = await fetch(`http://localhost:5000/updateVote/${numericId}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(updatedVote),
    })
    const data = await response.json();
    console.log("โ๏ธ ุฑุฏ ุงูุณูุฑูุฑ ุนูู ุงูุชุนุฏูู:", data);


    if (data.success) {
      showMessage("โ ุชู ุชุนุฏูู ุงูุชุตููุช ุจูุฌุงุญ", "success");
      modal.style.display = "none";
         // ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช ูู ุงูุณูุฑูุฑ ุจุฏู localStorage
       const res = await fetch("http://localhost:5000/getVotes")
       const newData = await res.json();
        if (newData.success) displayVotes(newData.votes);
    } else {
      showMessage("โ ูุดู ูู ุชุนุฏูู ุงูุชุตููุช: " + (data.message || ""), "error");
    }
    } catch (err) {
    console.error("โ๏ธ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุชุนุฏูู:", err);
    showMessage("โ๏ธ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู", "error");
  }
}





    document.addEventListener("DOMContentLoaded", function () {
        /*localStorage.clear();*/
        updateResultsTable();
    });


document.getElementById('addVoteForm').addEventListener('submit', function(e) {
  e.preventDefault();

  fetch("http://localhost:5000/addVote", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    numbersub:document.getElementById("numbersub").value,
    namesubject:document.getElementById("namesubject").value,
    name: document.getElementById("voteName").value,
    description: document.getElementById("voteDescription").value,
    teacher: document.getElementById("teacherName").value,
    hours: document.getElementById("creditHours").value,
    time: document.getElementById("suggestedTime").value,
    room: document.getElementById("classroom").value,
    prerequisite: document.getElementById("prerequisite").value,
    student_id: JSON.parse(localStorage.getItem("student")).student_id
  })
})
.then(res => res.json())
.then(data => {
  if (data.success) {
    showMessage("๐ ุชู ูุดุฑ ุงูุชุตููุช ุจูุฌุงุญ ูุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช!", "success");
    updateResultsTable();
    document.getElementById('addVoteForm').reset();
  } else {
    showMessage("โ๏ธ ูุดู ุญูุธ ุงูุชุตููุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.", "error");
  }
})
.catch(err => console.error("โ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุชุตููุช:", err));

/*showMessage("๐ ุชู ูุดุฑ ุงูุชุตููุช ุจูุฌุงุญ!", "success");*/
  updateResultsTable()
  this.reset();
});


        

// ูุงู ุนุดุงู ุฃุฒุฑุงุฑ "ุนุฑุถ ุงูุชูุงุตูู" ุชุดุชุบู ุจุนุฏ ูุง ูุฑูุฏุฑ ุงููุฑูุช
function attachDetailsToggle() {
  document.querySelectorAll(".details-toggle").forEach(button => {
    button.addEventListener("click", () => {
      const currentDetails = button.closest(".course-card").querySelector(".course-details");
      const icon = button.querySelector(".rotate-icon");

      const isHidden = currentDetails.classList.contains("hidden");
      document.querySelectorAll(".course-details").forEach(d => d.classList.add("hidden"));
      document.querySelectorAll(".rotate-icon").forEach(i => i.classList.remove("rotate-180"));

      if (isHidden) {
        currentDetails.classList.remove("hidden");
        icon.classList.add("rotate-180");
      }
    });
  });
}




function updateResultsTable() {
  const tableBody = document.querySelector("#resultsTable tbody");
 
  /*const votes = JSON.parse(localStorage.getItem("votes")) || [];*/
 
 fetch("http://localhost:5000/getVotes")
  .then(res => res.json())
  .then(data => {
     if (data.success) {
      const votes = data.votes; // โฌ๏ธ ุงูุจูุงูุงุช ูู ุงูุณูุฑูุฑ
  tableBody.innerHTML = "";
    votes.forEach(vote => {
    const row = document.createElement("tr");
    row.dataset.id = vote.id;
    row.innerHTML = `
      <td class="font-semibold">${vote.name}</td>
      <td class="text-green-600 font-bold">${vote.votes}</td>
      <td class="text-green-600 font-bold">${vote.percent}%</td>
      <td>
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${vote.percent}%"></div>
        </div>
      </td>
      <td>
        <button onclick="showVoteDetails(${vote.id})"showVoteDetails(id) class="btn-secondary text-sm details-btn" data-id="${vote.id}">ุชูุงุตูู</button>
        <button onclick="deleteVote(${vote.id})" class="btn-secondary text-sm bg-red-100 btn-delete" data-id="${vote.id}">ุญุฐู</button>
        <button onclick="updatecard(${vote.id})" class="btn-secondary text-sm bg-blue-100 edit-btn" data-id="${vote.id}">ุชุนุฏูู</button>
       <button  onclick="handleHideToggle(${vote.id})"  class="btn-secondary text-sm bg-orange-100 btn-hide" data-id="${vote.id}">${vote.hidden ? "ุฅุธูุงุฑ" : "ุฅุฎูุงุก"}</button>
      </td>
    `;
    tableBody.appendChild(row);
  });
  document.querySelectorAll(".btn-delete").forEach(btn => btn.addEventListener("click", handleDelete));
  document.querySelectorAll(".btn-hide").forEach(btn => btn.addEventListener("click", handleHideToggle));
        }     
    });     
}

async function handleHideToggle(e) {
   
  const id = e;
  try {
      // ๐น ูุฑุณู ุทูุจ ููุณูุฑูุฑ ูุชุจุฏูู ุญุงูุฉ ุงูุฅุฎูุงุก
      const response = await fetch(`http://localhost:5000/toggleHide/${id}`, {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
        });
        
        const data = await response.json();
        
        if (data.success) {
            showMessage(data.message, "success");
            
      // ุฅุนุงุฏุฉ ุชุญููู ุงููุงุฆูุฉ ุจุนุฏ ุงูุชุญุฏูุซ
      fetch("http://localhost:5000/getVotes")
      .then(res => res.json())
      .then(data => {
          if (data.success) displayVotes(data.votes);
          alert('9999999999999999');
        });
    } else {
      showMessage("โ ูุดู ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุฅุฎูุงุก", "error");
    }
  } catch (err) {
    console.error("โ๏ธ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ:", err);
    showMessage("โ๏ธ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู", "error");
  }
}




function deleteVote(id) {
  if (!confirm("ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุชุตููุชุ")) return;

  fetch(`http://localhost:5000/deleteVote/${id}`, {
    method: "DELETE"
  })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        showMessage(data.message, "success");
        updateResultsTable(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุฌุฏูู ุจุนุฏ ุงูุญุฐู
      } else {
        showMessage("โ๏ธ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู", "error");
      }
    })
    .catch(err => {
      console.error("โ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงูุชุตููุช:", err);
      showMessage("โ ูู ูุชู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ", "error");
    });
}






function showVoteDetails(id){
    fetch("http://localhost:5000/getVotes")
  .then(res => res.json())
  .then(data => {
      if (data.success) {
          if (!data.success) { throw new Error("ูุดู ุฌูุจ ุงูุชุตููุชุงุช"); }
          const votes = data.votes;
          const vote = votes.find(v => String(v.id) === String(id));
         if (!vote) {
        console.error("โ ุงูุชุตููุช ุบูุฑ ููุฌูุฏ ููู id:", iid);
        return;
    }
            showMessage(
        "๐ ุงุณู ุงูุชุตููุช:" + vote.name +" || "
        +"๐ฉโ๐ซ ุงููุฏุฑูุณ:" +vote.teacher +" || "
        +"๐ ุงูููุช:" + vote.time +" || "
        +"๐ซ ุงููุงุนุฉ:"+ vote.room +" || "
        +"๐ ุงููุตู:" +vote.description +" || "
        , "success");
        }
    })
   
    };









document.addEventListener("click", function(e) {
    if (e.target.classList.contains("details-btn")) {
      const id = e.target.getAttribute("data-id");
      showVoteDetails(id);
    }
});
      /*
  if (e.target.classList.contains("delete-btn")) {
    const id = e.target.getAttribute("data-id");
    deleteVote(id);
  }

  if (e.target.classList.contains("hide-btn")) {
      const id = e.target.getAttribute("data-id");
    showMessage((id), "info");
    hideVote(id);
  }

  if (e.target.classList.contains("edit-btn")) {
    const id = e.target.getAttribute("data-id");
    editVote(id);
  }

});*/





        // Navigation functionality
        const sidebarItems = document.querySelectorAll('.sidebar-item');
        const pageSection = document.querySelectorAll('.page-section');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');

        // Handle navigation
        sidebarItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all items
                sidebarItems.forEach(i => i.classList.remove('active'));
                pageSection.forEach(p => p.classList.remove('active'));
                
                // Add active class to clicked item
                this.classList.add('active');
                
                // Show corresponding page
                const targetPage = this.getAttribute('data-page');
                document.getElementById(targetPage).classList.add('active');
                
                // Close mobile menu
                sidebar.classList.remove('mobile-open');
            });
        });



        // Mobile menu toggle
        mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.toggle('mobile-open');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!sidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                sidebar.classList.remove('mobile-open');
            }
        });


        // Show message function
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-xl shadow-lg z-50 ${
                type === 'success' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'
            }`;
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => messageDiv.remove(), 4000);
        }
        

        // Initialize Chart
        const ctx = document.getElementById('votesChart');
        if (ctx) {
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['ุงูุฐูุงุก ุงูุงุตุทูุงุนู', 'ุฃูู ุณูุจุฑุงูู', 'ุจุฑูุฌุฉ ููุจ'],
                    datasets: [{
                        data: [587, 376, 284],
                        backgroundColor: [
                            '#4a5d23',
                            '#6b7c32',
                            '#8b9f41'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14,
                                    family: 'Arial'
                                }
                            }
                        }
                    }
                }
            });
        }


        // Logout functionality
        document.querySelector('button:contains("ุชุณุฌูู ุฎุฑูุฌ")') || 
        Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.includes('ุชุณุฌูู ุฎุฑูุฌ'))?.addEventListener('click', function() {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุชุณุฌูู ุงูุฎุฑูุฌุ')) {
                showMessage('ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ', 'success');
                setTimeout(() => {
                    window.location.href = '#';
                }, 2000);
            }
        });




        async function deleteVotetable(id) {
    if (!confirm("ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุชุตููุชุ")) return;

    const res = await fetch(`http://localhost:5000/delvote/${id}`, {
        method: "DELETE"
    });

    const data = await res.json();

    if (data.success) {
        alert("ุชู ุญุฐู ุงูุชุตููุช โ");
        window.onload = loadVotes;
    } else {
        alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู");
    }
}



     
      /*
document.addEventListener("click", function(e) {
  if (e.target.classList.contains("edit-btn")) {
    const id = e.target.getAttribute("data-id");
    
    // ูุฌูุจ ุงูุจูุงูุงุช ูู localStorage
    const votes = JSON.parse(localStorage.getItem("votes")) || [];
    const vote = votes.find(v => v.id == id);
    if (!vote) return;

    // ููุชุญ ุงูููุฏุงู
    const modal = document.getElementById("addSubjectModal");
    modal.style.display = "flex";

    // ูุนุจู ุงูููุฑู ุจุงูููู ุงููุฏููุฉ
    document.querySelector("#addSubjectModal input[placeholder='ูุซุงู: ุจุฑูุฌุฉ ุงูููุจ ุงููุชูุฏูุฉ']").value = vote.name;
    document.querySelector("#addSubjectModal input[placeholder='ูุซุงู: CS401']").value = vote.code || "";
    document.querySelector("#addSubjectModal textarea").value = vote.description;
    document.querySelector("#addSubjectModal input[placeholder='ุฏ. ุฃุญูุฏ ูุญูุฏ']").value = vote.teacher;
    document.querySelector("#addSubjectModal select:nth-of-type(2)").value = vote.hours;
    document.querySelector("#addSubjectModal input[type='datetime-local']:nth-of-type(1)").value = vote.startDate || "";
    document.querySelector("#addSubjectModal input[type='datetime-local']:nth-of-type(2)").value = vote.endDate || "";

    // ูุฎุฒู ุงูู id ุนุดุงู ูุนุฑู ุงุญูุง ุจูุนุฏู ุนูู ููู
    modal.setAttribute("data-edit-id", id);
  }
});

*/

    </script>

</body>
</html>





<!--
CREATE DATABASE university_db;
\c university_db;


CREATE TABLE programs (
  program_id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL
);


CREATE TABLE courses (
  course_code VARCHAR(20) PRIMARY KEY,
  title VARCHAR(200),
  credits INT
);


CREATE TABLE students (
  student_id SERIAL PRIMARY KEY,
  first_name VARCHAR(100),
  email VARCHAR(100) UNIQUE,
  password VARCHAR(100),
  program_id INT REFERENCES programs(program_id),
  completed_credits INT,
  level VARCHAR(20),
  status VARCHAR(20)
);


CREATE TABLE program_courses (
  id SERIAL PRIMARY KEY,
  program_id INT REFERENCES programs(program_id),
  course_code VARCHAR(20) REFERENCES courses(course_code),
  type VARCHAR(50), 
  prereq_codes TEXT 
);


CREATE TABLE student_courses (
  id SERIAL PRIMARY KEY,
  student_id INT REFERENCES students(student_id),
  course_code VARCHAR(20) REFERENCES courses(course_code),
  grade_symbol VARCHAR(2),  
  grade_value NUMERIC(4,2), 
  status VARCHAR(20),       
  semester VARCHAR(20)      
);


CREATE TABLE votes (
  vote_id SERIAL PRIMARY KEY,
  student_id INT REFERENCES students(student_id),
  course_code VARCHAR(20) REFERENCES courses(course_code),
  vote_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

COPY student_courses(student_id, course_code, grade_symbol, grade_value, status, semester)
FROM 'C:\\Program Files\\PostgreSQL\\18\\data\\database\\student_courses.csv'
DELIMITER ';'
CSV HEADER;


COPY votes(student_id, course_code, vote_value)
FROM 'C:\\Program Files\\PostgreSQL\\18\\data\\database\\votes.csv'
DELIMITER ';'
CSV HEADER;

